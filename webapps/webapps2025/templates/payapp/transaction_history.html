{% extends 'base.html' %}
{% block body_class %}theme-hero{% endblock %}
{% load crispy_forms_tags %}
{% block title %}Transaction History{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4 text-gradient">Transaction History</h2>

    {% if transactions %}
        <div class="table-responsive glass-table shadow-sm rounded-3">
            <table class="table align-middle mb-0">
                <thead class="thead-glass">
                    <tr>
                        <th>#</th>
                        <th>Sender</th>
                        <th>Recipient</th>
                        <th>Amount</th>
                        <th>Date</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for transaction in transactions %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ transaction.sender.username }}</td>
                        <td>{{ transaction.recipient.username }}</td>
                        <td>${{ transaction.amount }}</td>
                        <td>{{ transaction.timestamp|date:"M d, Y H:i" }}</td>
                        <td>
                            {% if transaction.status == "COMPLETED" %}
                                <span class="badge status-completed">Completed</span>
                            {% elif transaction.status == "PENDING" %}
                                <span class="badge status-pending">Pending</span>
                            {% elif transaction.status == "REJECTED" %}
                                <span class="badge status-failed">Failed</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="alert alert-warning text-center glass-alert">No transactions found.</p>
    {% endif %}

    <div class="text-center mt-4">
        <a href="{% url 'dashboard' %}" class="btn btn-gradient px-4">Back to Dashboard</a>
    </div>
</div>
{% endblock %}

{% block styles %}
<style>
    .glass-table { background: rgba(255,255,255,.85); 
        backdrop-filter: blur(18px); 
        border: 1px solid rgba(255,255,255,.6); }
    @media (prefers-color-scheme: dark) { .glass-table {background: rgba(18,22,27,.6); 
        border-radius: rgba(255,255,255,.12);}}
    .thead-glass th { background: linear-gradient(90deg, var(--hero1), var(--hero2)); 
        color: #eaf4ff; border: none;}
    @media (prefers-color-scheme: dark) {.table > :not(caption) > * > * {border-color: rgba(255,255,255,.12);}}
    .table tbody tr:hover {background: color-mix(in srgb, color #ffffff 30%, transparent) ;}
    
    .badge { border-radius: 999px; padding: .45rem .8rem; font-weight: 600; }
    .status-completed { background: color-mix(in srgb, var(--accent) 70%, #ffffff 0%); color: #0b2b4c;}
    .status-pending { background: #ffe9b3; color: #4a3b00; }
    .status-failed { background: #ffb3b3; color: #5b0000;}
    .glass-alert {background: rgba(255,255,255,.85); border: 1px solid rgba(255,255,255,.6);}
    .text-gradient { background: linear-gradient(90deg, #fff, var(--brand), var(--accent)); 
        -webkit-background-clip: text; background-clip: text; color: transparent; }
    .table > :not(caption) > * > * {border-color: rgba(0,0,0,.06);}
</style>
{% endblock %}
