{# templates/payapp/payment_new.html #}
{% extends "payapp/base.html" %}
{% load widget_tweaks %}

{% block title %}Create payment link · VyoPay{% endblock %}

{% block content %}
<a href="{% url 'payapp:dashboard' %}" class="text-sm text-slate-400 hover:text-slate-200 mb-4 inline-flex items-center gap-1">
  ← Back to dashboard
</a>

<div class="max-w-4xl mx-auto bg-slate-900/80 border border-slate-800 rounded-3xl px-8 py-7 shadow-2xl mt-4">
  <div class="mb-7">
    <h1 class="text-3xl font-semibold tracking-tight text-slate-50">
      Create payment link
    </h1>
    <p class="text-sm text-slate-400 mt-1.5">
      Generate a secure VyoPay checkout link to share with your customer.
    </p>
  </div>

  <form method="post" class="space-y-6">
    {% csrf_token %}

    {% if form.non_field_errors %}
      <div class="mb-3 rounded-lg border border-red-500/60 bg-red-500/10 px-3 py-2 text-sm text-red-200">
        {% for error in form.non_field_errors %}
          <p>{{ error }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
      <div>
        <label class="block text-xs font-medium text-slate-300 mb-1.5">
          Amount
        </label>
        {{ form.amount.errors }}
        {{ form.amount|add_class:"w-full px-3 py-2.5 rounded-lg bg-slate-950 border border-slate-700 text-sm text-slate-50 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 shadow-inner" }}
      </div>

      <div>
        <label class="block text-xs font-medium text-slate-300 mb-1.5">
          Currency
        </label>
        {{ form.currency.errors }}
        {{ form.currency|add_class:"w-full px-3 py-2.5 rounded-lg bg-slate-950 border border-slate-700 text-sm text-slate-50 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 shadow-inner uppercase" }}
      </div>
    </div>

    <div>
      <label class="block text-xs font-medium text-slate-300 mb-1.5">
        Description <span class="text-slate-500">(optional)</span>
      </label>
      <p class="text-[11px] text-slate-500 mb-1">
        e.g. “Branding deposit”, “Invoice #1024”.
      </p>
      {{ form.description.errors }}
      {{ form.description|add_class:"w-full min-h-[90px] px-3 py-2.5 rounded-lg bg-slate-950 border border-slate-700 text-sm text-slate-50 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 shadow-inner resize-none" }}
    </div>

    <div class="max-w-xs">
      <label class="block text-xs font-medium text-slate-300 mb-1.5">
        Expiry (days)
      </label>
      <p class="text-[11px] text-slate-500 mb-1">
        After this date, the VyoPay link will no longer accept payments.
      </p>
      {{ form.expiry_days.errors }}
      {{ form.expiry_days|add_class:"w-full px-3 py-2.5 rounded-lg bg-slate-950 border border-slate-700 text-sm text-slate-50 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 shadow-inner" }}
    </div>

    <div class="flex justify-end gap-3 pt-4">
      <a href="{% url 'payapp:dashboard' %}"
         class="px-4 py-2 rounded-lg border border-slate-700 text-sm text-slate-200 hover:bg-slate-800/70 transition">
        Cancel
      </a>
      <button type="submit"
              class="px-5 py-2 rounded-lg bg-cyan-400 text-slate-900 text-sm font-medium shadow-[0_14px_40px_rgba(34,211,238,0.4)] hover:bg-cyan-300 transition">
        Create link
      </button>
    </div>
  </form>
</div>
{% endblock %}
